<RootWidget>:
    MainScreen:
        name: "main_screen"
        id: screen_ms_ID
    ExerciseScreen:
        name: "exercise_screen"
        id: screen_es_ID
    SessionStartScreen:
        name: "session_start_screen"
        id: screen_ss_ID
    StartHIITScreen
        name: "start_HIIT_screen"
        id: screen_sh_ID
    HIIT_Timer_Screen:
        name: "HIIT_timer_screen"
        id: screen_ht_ID

<MainScreen>:
    MDRectangleFlatButton:
        text: "Manage exercises database"
        pos_hint: {'center_x':0.5, 'center_y':0.9}
        on_press:
            root.manager.transition.direction = "left"
            root.manager.current = "exercise_screen"
    MDRectangleFlatButton:
        text: "Manage planned sessions"
        pos_hint: {'center_x':0.5, 'center_y':0.7}
    MDRectangleFlatButton:
        text: "Start a random session"
        pos_hint: {'center_x':0.5, 'center_y':0.5}
        on_press:
            root.manager.transition.direction = "left"
            root.manager.current = "session_start_screen"
    MDRectangleFlatButton:
        text: "Start a planned session"
        pos_hint: {'center_x':0.5, 'center_y':0.3}
    MDRectangleFlatButton:
        text: "HIIT Timer"
        pos_hint: {'center_x':0.5, 'center_y':0.1}
        on_press:
            root.manager.transition.direction = "left"
            root.manager.current = "start_HIIT_screen"

<ExerciseScreen>:
    GridLayout:
        spacing: "20dp"
        cols: 1

        Toolbar:
            id: toolbar
            title: 'Exercise database'
            left_action_items: [["arrow-left", lambda x: app.change_screen('main_screen','right')]]
            right_action_items: [["plus", lambda x: root.button_add_exercise() ]]

        BoxLayout:
            orientation: "vertical"
            padding: "10dp"
            size_hint: (1, 0.1)

            MDBoxLayout:
                adaptive_height: True

                MDIconButton:
                    icon: "magnify"

                MDTextField:
                    id: search_field
                    hint_text: "Search exercise"
                    on_text: root.display_searched_exercises(self.text)

        ScrollView:
            size_hint: (1, 0.9)
            MDList:
                id: containerList


<AddExerciseDialogContent>:
    orientation: "vertical"
    spacing: "10dp"
    size_hint_y: None
    height: "300dp"

    MDTextField:
        id: field_name
        hint_text: "Name"

    MDDropDownItem:
        id: dropdown_item
        text: 'category'
        pos_hint: {"center_x": .5}
        on_release: root.menu.open()

    BoxLayout:
        orientation: "horizontal"
        spacing: "10dp"

        MDCheckbox:
            id: check_jumping
            size_hint: (0.1, 1)
        MDLabel:
            text: "Jumping"

    BoxLayout:
        orientation: "horizontal"
        spacing: "10dp"

        MDCheckbox:
            id: check_running
            size_hint: (0.1, 1)
        MDLabel:
            text: "Running"

    BoxLayout:
        orientation: "horizontal"
        spacing: "10dp"

        MDCheckbox:
            id: check_mattress
            size_hint: (0.1, 1)
        MDLabel:
            text: "Mattress"

    BoxLayout:
        orientation: "horizontal"
        spacing: "10dp"

        MDCheckbox:
            id: check_skip
            size_hint: (0.1, 1)
        MDLabel:
            text: "Skipping rope"

<ExerciseDialogContent>:
    orientation: "vertical"
    spacing: "10dp"
    size_hint_y: None
    height: "300dp"

    MDLabel:
        id: field_name
        font_style: "H4"

    MDLabel:
        id: field_category

    BoxLayout:
        orientation: "horizontal"
        spacing: "10dp"

        MDCheckbox:
            id: check_jumping
            size_hint: (0.1, 1)
            disabled: True
        MDLabel:
            text: "Jumping"

    BoxLayout:
        orientation: "horizontal"
        spacing: "10dp"

        MDCheckbox:
            id: check_running
            size_hint: (0.1, 1)
            disabled: True
        MDLabel:
            text: "Running"

    BoxLayout:
        orientation: "horizontal"
        spacing: "10dp"

        MDCheckbox:
            id: check_mattress
            size_hint: (0.1, 1)
            disabled: True
        MDLabel:
            text: "Mattress"

    BoxLayout:
        orientation: "horizontal"
        spacing: "10dp"

        MDCheckbox:
            id: check_skip
            size_hint: (0.1, 1)
            disabled: True
        MDLabel:
            text: "Skipping rope"

<StartHIITScreen>:
    GridLayout:
        spacing: "10dp"
        cols: 1

        Toolbar:
            id: toolbar
            title: 'HIIT timer settings'
            left_action_items: [["arrow-left", lambda x: app.change_screen('main_screen','right')]]

        GridLayout:
            cols: 1
            spacing: "10dp"
            padding: "48dp"


            MDTextField:
                id: input_prep_time
                input_filter: "int"
                hint_text: "Preparation time [s]"
                text: "5"

            MDTextField:
                id: input_work_time
                input_filter: "int"
                hint_text: "Work time [s]"
                text: "45"

            MDTextField:
                id: input_rest_time
                input_filter: "int"
                hint_text: "Rest time [s]"
                text: "15"

            MDTextField:
                id: input_number_round
                input_filter: "int"
                hint_text: "Number of round"
                text: "25"

        RelativeLayout:
            MDFloatingActionButton:
                icon: "run"
                md_bg_color: (106 / 255, 216 / 255, 139 / 255, 255 / 255)
                pos_hint: {"right": 0.9, "top": 0.51}
                on_press:
                    root.manager.transition.direction = "left"
                    root.manager.current = "HIIT_timer_screen"
                    app.root.ids.screen_ht_ID.start_timer(input_prep_time.text,input_work_time.text,input_rest_time.text,input_number_round.text)

<HIIT_Timer_Screen>:
    GridLayout:
        spacing: "10dp"
        cols: 1

        Toolbar:
            id: toolbar
            title: 'HIIT timer'
            left_action_items: [["arrow-left", lambda x: root.abort() ]]
            right_action_items: [["play-pause", lambda x: root.toggle() ]]

        MDLabel:
            id: label_title
            font_style: "H2"
            text: root.str_title
            halign: "center"
            theme_text_color: "Custom"
            text_color: root.color_title

        MDLabel:
            id: label_counter
            font_style: "H1"
            text: root.str_timer
            halign: "center"

        MDLabel:
            id: label_round
            font_style: "H4"
            text: root.str_round
            halign: "center"


<SessionStartScreen>:
    BoxLayout:
        orientation: 'vertical'

        Toolbar:
            id: toolbar
            title: 'HIIT session settings'
            left_action_items: [["arrow-left", lambda x: app.change_screen('main_screen','right')]]

        MDLabel:
            text: "This is the screen where you set your settings to start a new session"
        MDIconButton:
            icon: "run"



